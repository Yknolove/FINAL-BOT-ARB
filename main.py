BOT_TOKEN = os.getenv( "BOT_TOKEN" )
WEBHOOK_URL = os.getenv( "WEBHOOK_URL" )    # https://your.domain/webhook
"""–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –±–æ—Ç Telegram –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ–± –∞—Ä–±–∏—Ç—Ä–∞–∂–µ P2P."""

–∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å‚Äã
–∏–∑ –∏–º–ø–æ—Ä—Ç–∞ aiogram Bot, Dispatcher, —Ç–∏–ø—ã
–∏–∑ –∏–º–ø–æ—Ä—Ç–Ω–æ–≥–æ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è
 aiogram.utils


BOT_TOKEN = os.getenv( "BOT_TOKEN" )
WEBHOOK_URL = os.getenv( "WEBHOOK_URL" )   # https://your.domain/webhook
WEBHOOK_PATH = "/webhook"
–ü–û–†–¢         = int (os.getenv( "–ü–û–†–¢" , 8443 ))
–ü–û–†–¢= int (os.getenv( "PORT" , 8443 ))

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –±–æ—Ç–∞ –∏ –¥–∏—Å–ø–µ—Ç—á–µ—Ä–∞
–±–æ—Ç = –ë–æ—Ç(—Ç–æ–∫–µ–Ω=BOT_TOKEN)
dp = –î–∏—Å–ø–µ—Ç—á–µ—Ä(–±–æ—Ç)

# –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –≥–ª–∞–≤–Ω–æ–≥–æ –º–µ–Ω—é
def main_menu_keyboard () -> types.InlineKeyboardMarkup:
 
    –∫–± = —Ç–∏–ø—ã.InlineKeyboardMarkup(row_width= 2 )
    –∫–±.–¥–æ–±–∞–≤–∏—Ç—å(
        types.InlineKeyboardButton( "‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏" , callback_data= "settings" ),
        types.InlineKeyboardButton("üìà –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä", callback_data="calculator"),
    ).–¥–æ–±–∞–≤–ª—è—Ç—å(
        types.InlineKeyboardButton( "üìú –ò—Å—Ç–æ—Ä–∏—è" , callback_data= "history" ),
        types.InlineKeyboardButton( "üî• –¢–æ–ø-—Å–¥–µ–ª–∫–∏" , callback_data= "top_deals" ),
    )
    –≤–µ—Ä–Ω—É—Ç—å –∫–±

# /–∑–∞–ø—É—Å—Ç–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫
@dp.message_handler( –∫–æ–º–∞–Ω–¥—ã=[ "—Å—Ç–∞—Ä—Ç" ] )
async def cmd_start ( —Å–æ–æ–±—â–µ–Ω–∏–µ: —Ç–∏–ø—ã.–°–æ–æ–±—â–µ–Ω–∏–µ ):
  
    –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π_—Ç–µ–∫—Å—Ç = (
        "<b>üëã –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ–º –≤ ArbitPRO!</b>

"
        "–Ø –≤–∞—à –ø–æ–º–æ—â–Ω–∏–∫ –≤ –º–∏—Ä–µ P2P-–∞—Ä–±–∏—Ç—Ä–∞–∂–∞.

"
        "üîç –û—Ç—Å–ª–µ–∂–∏–≤–∞—é –ª—É—á—à–∏–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø–æ –ø–æ–∫—É–ø–∫–µ –∏ –ø—Ä–æ–¥–∞–∂–µ USDT.
"
        "‚öôÔ∏è –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–π—Ç–µ —Å–≤–æ–∏ –ª–∏–º–∏—Ç—ã –∏ –ø–æ–ª—É—á–∞–π—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è.

"
        "<b>üëã –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ–º –≤ ArbitPRO!</b>\n"
        "–Ø –≤–∞—à –ø–æ–º–æ—â–Ω–∏–∫ –≤ –º–∏—Ä–µ P2P-–∞—Ä–±–∏—Ç—Ä–∞–∂–∞.\n"
        "üîç –û—Ç—Å–ª–µ–∂–∏–≤–∞—é –ª—É—á—à–∏–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø–æ –ø–æ–∫—É–ø–∫–µ –∏ –ø—Ä–æ–¥–∞–∂–µ USDT.\n"
        "‚öôÔ∏è –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–π—Ç–µ —Å–≤–æ–∏ –ª–∏–º–∏—Ç—ã –∏ –ø–æ–ª—É—á–∞–π—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è.\n"
        "<i>–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–∏–∂–µ:</i>"
    )
    –æ–∂–∏–¥–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è.–æ—Ç–≤–µ—Ç(
        –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π_—Ç–µ–∫—Å—Ç,
        parse_mode=types.ParseMode.HTML,
        reply_markup=–≥–ª–∞–≤–Ω–æ–µ_–º–µ–Ω—é_–∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞(),
        disable_web_page_preview= –ü—Ä–∞–≤–¥–∞
    )

# –£—Ç–∏–ª–∏—Ç–∞: –æ—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –∞—Ä–±–∏—Ç—Ä–∞–∂–µ –≤ —Å—Ç–∏–ª–µ –≤—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏—è —Å –∫–Ω–æ–ø–∫–∞–º–∏ URL
–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –¥–µ—Ñ send_arbitrage_notification (  
    chat_id: —Ü–µ–ª–æ–µ —á–∏—Å–ª–æ ,
    –∏—Å—Ç–æ—á–Ω–∏–∫_–ø–æ–∫—É–ø–∫–∏: —É–ª ,
    buy_rate: –ø–ª–∞–≤–∞—é—â–∏–π ,
    buy_min: —Ü–µ–ª–æ–µ ,
    –∏—Å—Ç–æ—á–Ω–∏–∫_–ø—Ä–æ–¥–∞–∂–∏: —É–ª ,
    sell_rate: –ø–ª–∞–≤–∞—é—â–∏–π ,
    sell_max: —Ü–µ–ª–æ–µ —á–∏—Å–ª–æ ,
    profit_pct: –ø–ª–∞–≤–∞—é—â–∏–π ,
    –≤—Ä–µ–º—è_–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è: —É–ª ,
    buy_url: —É–ª ,
    sell_url: —É–ª ,
):
    —Ç–µ–∫—Å—Ç = (
        "<b>ü™ô –ê—Ä–±–∏—Ç—Ä–∞–∂–Ω–∞—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –Ω–∞–π–¥–µ–Ω–∞!</b>

"
        "<b>ü™ô –ê—Ä–±–∏—Ç—Ä–∞–∂–Ω–∞—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –Ω–∞–π–¥–µ–Ω–∞!</b>\n"
        f"üí∞ <b>–ü–æ–∫—É–ø–∫–∞:</b> {buy_source}\n"
        f"üè∑Ô∏è <b>–ö—É—Ä—Å:</b> {buy_rate: .2 f} ‚Ç¥\n"
        f"üì¶ <b>–û–±—ä—ë–º:</b> –æ—Ç {buy_min}$\n\n"
        f"üíº <b>–ü—Ä–æ–¥–∞–∂–∞:</b> {sell_source} \n"
        f"üè∑Ô∏è <b>–ö—É—Ä—Å:</b> {sell_rate: .2 f} ‚Ç¥\n"
        f"üì¶ <b>–û–±—ä—ë–º:</b> –¥–æ {sell_max}$\n\n"
        f"üìà <b>–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –ø—Ä–∏–±—ã–ª—å:</b> +{profit_pct:.1f}%\n"
        f"‚è∞ <b>–û–±–Ω–æ–≤–ª–µ–Ω–æ:</b> {updated_time}\n\n"
        "#–∞—Ä–±–∏—Ç—Ä–∞–∂ #bybit #binance #p2p"
    )

    –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ = —Ç–∏–ø—ã.InlineKeyboardMarkup(row_width= 2 )
    –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞.–¥–æ–±–∞–≤–∏—Ç—å(
        types.InlineKeyboardButton("üîó –û—Ñ–µ—Ä—Ç –Ω–∞ –ø–æ–∫—É–ø–∫—É", url=buy_url),
        types.InlineKeyboardButton( "üîó –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –æ –ø—Ä–æ–¥–∞–∂–µ" , url=sell_url),
    )

    –æ–∂–∏–¥–∞–Ω–∏–µ bot.send_message(
        chat_id=chat_id,
        —Ç–µ–∫—Å—Ç=—Ç–µ–∫—Å—Ç,
        parse_mode=types.ParseMode.HTML,
        disable_web_page_preview= –ü—Ä–∞–≤–¥–∞ ,
        reply_markup=–∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞,
    )


–µ—Å–ª–∏ __name__ == "__main__" :
    executor.start_polling(dp, skip_updates= True )
